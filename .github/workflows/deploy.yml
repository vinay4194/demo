name: Deploy React App to Netlify

on:
   push:
      branches:
         - main # Runs when pushing to the main branch

jobs:
   build-and-deploy:
      runs-on: ubuntu-latest

      steps:
         - name: Checkout Repository
           uses: actions/checkout@v3

         - name: Set up Node.js
           uses: actions/setup-node@v3
           with:
              node-version: 18

         - name: Install Dependencies
           run: npm install

         - name: Build React App
           run: npm run build

         - name: Install Netlify CLI
           run: npm install -g netlify-cli # Ensures CLI is installed

         - name: Deploy to Netlify
           run: netlify deploy --prod --dir=build --site $NETLIFY_SITE_ID
           env:
              NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
              NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
